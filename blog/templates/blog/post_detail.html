{% extends "users/base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block header %}
<div class="s-pageheader">
    <header class="header">
        <div class="header__content row">
            <div class="header__logo">
                <a class="logo" href="{% url 'blog:home' %}">
                    <img src="{% static 'images/logo.svg' %}" alt="Homepage">
                </a>
            </div> 
            <ul class="header__social">
                {% include "blog/social_links.html" %}
            </ul> 
            <a class="header__toggle-menu" href="#0" title="Menu"><span>Menu</span></a>
            {% include "blog/nav.html" %}
        </div>  
    </header>
</div>
{% endblock header %}

{% block content %}
<section class="s-content s-content--narrow s-content--no-padding-bottom">

    <article class="row format-standard">

        <div class="s-content__header col-full">
            <h1 class="s-content__header-title">
                {{ object.title }}
            </h1>
            <ul class="s-content__header-meta">
                <li class="date">{{ object.date_posted }} &middot; {{ object.read_time }} minutes</li>
                <li class="cat">
                    In
                    {% for tag in object.tag %}
                        <a href="{% url 'blog:tag' tag=tag %}">{{ tag }}</a>
                    {% endfor %}
                </li>
            </ul>
        </div> 

        <div class="s-content__media col-full">
            <div class="s-content__post-thumb">
                <img src="{{ object.featured_image.url }}" sizes="(max-width: 2000px) 100vw, 2000px" alt="{{ object.title }} Featured Image" >
            </div>
        </div> 

        <div class="col-full s-content__main">

            <p class="lead">
                {{ object.preview }}            
            </p>
            <div class="content-markdown text-dark">
                {{ object.content }}
                {% if object.note %}
                    <iframe src="{{ object.note.url }}" width="100%" height="500px"></iframe>
                    {{ object.note }}
                {% else %}
                    No notes currently
                {% endif %}
            </div>
            <hr class="my-5" />
            {% if object.author == request.user %}
            <div class="row">
                <div class="col-12">
                    <a class="btn btn-marketing btn-block rounded-pill mt-4" href="{% url 'blog:post_update' object.id %}">Update</a>
                    <a class="btn btn-marketing btn-block rounded-pill mt-4" href="{% url 'blog:post_delete' object.id %}">Delete</a>
                </div>
            </div>
            <hr class="my-5" />
            {% endif %}

            <p class="s-content__tags">
                <span class="s-content__tag-list">
                    {% for tag in object.tag %}
                        <a href="{% url 'blog:tag' tag=tag %}">{{ tag }}</a>
                    {% endfor %}
                </span>
            </p> 
        </div>
    </article>
</section>
{% endblock %}